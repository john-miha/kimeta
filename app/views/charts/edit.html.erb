<%#
ファイル名は、コントローラ名/アクション名.html.erbにする
この名前にすると、アクセス時のURLが/コントローラー名/アクション名　になる。
@chart_headerでコントローラ側で指定したテンプレート変数を取得できる。

form_forが自動的に生成してくれるパスは複数形のみ。
urlを指定して、飛び先を教えてあげる。
 #%>

<h1>id: <%= @chart.id %> の比較表編集ページ</h1>

<%= form_with(model: @chart) do |f| %>
    <%= f.label :title, "Title" %>
    <%= f.text_field :title %><br>
    <%= f.label :description, "Description" %>
    <%= f.text_field :description %><br>

    <%#ここからEvaluationの初期化処理%>
    <table class="table">
      <thead>
        <tr>
          <th>観点</th>
          <th>
            <%= f.label :itemname, "アイテム1" %>
            <%= text_field_tag 'itemnames[]' %>
          </th>
          <th>
            <%= f.label :itemname, "アイテム2" %>
            <%= text_field_tag 'itemnames[]' %><br>
          </th>
          <th>
            <%= f.label :itemname, "アイテム3" %>
            <%= text_field_tag 'itemnames[]' %><br>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <%= f.label :viewpointname, "1" %>
            <%= text_field_tag 'viewpointnames[]' %>
          </td>
          <% for id in 0..2 do %>
            <td>
              <%= f.label :score, "Score" + id.to_s %>
              <%#= text_field_tag 'evaluationscores[]' %>
              <select name="evaluationscores[]">
                <option value=1>1</option>
                <option selected="selected" value=2>2</option>
                <option value=3>3</option>
              </select>
              <br>
              <%= f.label :comment, "Comment" + id.to_s %>
              <%= text_field_tag 'evaluationcomments[]' %><br>
            </td>
          <% end %>
        </tr>
        <tr>
          <td>
            <%= f.label :viewpointname, "2" %>
            <%= text_field_tag 'viewpointnames[]' %>
          </td>
          <% for id in 3..5 do %>
            <td>
              <%= f.label :score, "Score" + id.to_s %>
              <%#= text_field_tag 'evaluationscores[]' %>
              <select name="evaluationscores[]">
                <option value=1>1</option>
                <option selected="selected" value=2>2</option>
                <option value=3>3</option>
              </select>
              <br>
              <%= f.label :comment, "Comment" + id.to_s %>
              <%= text_field_tag 'evaluationcomments[]' %><br>
            </td>
          <% end %>
        </tr>
        <tr>
          <td>
            <%= f.label :viewpointname, "3" %>
            <%= text_field_tag 'viewpointnames[]' %>
          </td>
          <% for id in 6..8 do %>
            <td>
              <%= f.label :score, "Score" + id.to_s %>
              <%#= text_field_tag 'evaluationscores[]' %>
              <select name="evaluationscores[]">
                <option value=1>1</option>
                <option selected="selected" value=2>2</option>
                <option value=3>3</option>
              </select>
              <br>
              <%= f.label :comment, "Comment" + id.to_s %>
              <%= text_field_tag 'evaluationcomments[]' %><br>
            </td>
          <% end %>

        </tr>
      </tbody>
    </table>

    <%= f.submit 'submit' %>
<% end %>

<%= link_to '一覧に戻る', charts_path %>